<!DOCTYPE html> 
<html> 
  <head> 
    <title>Controls for IBE Reskinning</title> 
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'> 
    <meta charset='utf-8'> 
    <meta keywords='IBE Reskinning prototypes'> 
    <meta content='prototype of web controls for IBE' name='description'> 
    <meta content='Victor Hugo Borja' name='author'> 
    <meta content='vic.borja@gmail.com' name='author-email'> 
    <link href='index.css' rel='stylesheet' type='text/css'> 
    <script src='js/json2.js' type='text/javascript'></script> 
    <script src='js/underscore-min.js' type='text/javascript'></script> 
    <script src='js/less-1.0.33.min.js' type='text/javascript'></script> 
    <script src='js/jquery-1.4.2.min.js' type='text/javascript'></script> 
    <script src='js/jquery-ui-1.8.4.custom.min.js' type='text/javascript'></script> 
    <script src='http://jqueryui.com/themeroller/themeswitchertool/' type='text/javascript'></script> 
    <script src='js/jquery.timeago.js' type='text/javascript'></script> 
    <script src='js/jquery.purr.js' type='text/javascript'></script> 
    <script src='js/date.js' type='text/javascript'></script> 
    <script src='index.js' type='text/javascript'></script> 
  </head>
  <body>

    <div class="color-theme-select">
      <div class="theme-roller">
    </div>

    <h2>IBE Reskinning - WEB Controls</h2>
    <div class="protocol-warning ui-state-error ui-corner-all">
      <div class="ui-widget-header ui-corner-all">
        You not viewing this file using the http:// protocol.
      </div>
      <p>
        Some examples wont work as they expect to make ajax, other http
        network stuff.
      </p>

      <div>
        A <code>serve.py</code> server is included. Just run:

        <pre>
          $ <code>python serve.py</code>
        </pre>
        
        And start your browser in 
        <a href="http://localhost:8000">http://localhost:8000</a>
      </div>
    </div>

    <p>
      This page will showcase several web controls implemented with pure
      css and javascript.

      The intention is to document how controls should be implemented, coding
      conventions, and examples. 

      If you have the source for this page, you can take a look
      at <code>index.html</code> <code>index.js</code> and <code>index.css</code>

      I tried to make each example as easy as possible, trying to
      lower the learning curve for you. Make sure you understand the implementation
      of the controls that will be implemented on your page. If you
      have questions, please send me a message.
    </p>

    <div class="content">
      <h3 class="ui-widget-header ui-corner-all">Conventions</h3>

      <div>
        <h4>The future is now!</h4>
        <p>
          We will be using current industry standards for all
          documents we create. HTML5 for html/jsp files and CommonJS
          conformant modules for our javascript needs.
        </p>

        <h5>HTML5 conformance</h5>
        <p>
          Always use HTML5 document declaration.
        </p>
        <pre>
          <code class="html">
            &lt;!DOCTYPE html&gt; 
            &lt;html&gt; 
              ...
            &lt;/html&gt; 
          </code>
        </pre>
        <p>
          If you need to create custom html element attributes, make
          sure you prefix them with <code>data-</code> so that the document
          validates as HTML5.
        </p>
        <pre>
          <code class="html">
            &lt;div data-type="available" /&gt; 
            &lt;div data-type="best-rate" /&gt; 
            &lt;div data-type="on-hollidays" /&gt; 
          </code>
        </pre>

        <h5>CommonJS standards</h5>
        <p>
          <a href="http://commonjs.org">Common JS</a> is a community effort to create
          standards for javascript applications, both server and client side.
        </p>
        <p>
          We will be
          using <a href="http://requirejs.org">requirejs</a> to load
          all the javascript, css and other resources we need.
        </p>
        <p>
          The advantage of using requirejs is that resources are
          loaded async, which means faster loading, more reusable
          javascript modules, and a clean, un-polluted javascript
          global scope.
        </p>
      </div>

      <div>
        <h4>Javascript Layout and Directory Structure</h4>
        <p>
          All javascript files <em>must</em> be stored under
          the <code>js/</code> directory of the server's document
          root.<br />
        </p>
        <p>
          The url
          for <a href="/js/console.js"><code>console.js</code></a> will be
          <code>http://localhost/js/console.js</code>
        </p>
        <p>
          You are expected to create subdirectories to acommodate your
          needs by creating reusable javascript modules with
          requirejs.
        </p>

        <p>
          For example, say I'm implementing the javascript for the
          IBE Login page.. the javascript for it must be available at: 
          <br />
          <code>js/ibe/login.js</code>
        </p>
      </div>

      <div>
        <h4>Create a javascript modules per .js file you create</h4>
        <p>
          Following the convention from the previous point, you are
          expected to make every .js file a <code>requirejs</code>
          conformant module. <br />

          The advantang of doing so, is that module dependencies will
          be automatically resolved for us by requirejs, modules will
          be only loaded once and only when needed. The client will
          get faster load times and less network usage.
        </p>
        <p>
          
        </p>
      </div>

      <div>
        <h4>No Javascript on HTML/JSP files.</h4>
        <p>
          <em>do not place any javascript code on html elements</em>, not even using
          script tags, nor as onclick attribute for elements.

          Doing this only makes things more difficult when developer
          instance != you
        </p>
        <p>
          You are expected to create .js files for every javascript you need. 

          Event handlers like onclick, onchange, etc, must be bound to
          the corresponding elements by using jQuery's event
          binding
        </p>
      </div>

      <div>
        <h4>No styling information on HTML/JSP files</h4>
        <p>
          HTML/JSP must be used <em>only for content and
          structure</em>
          information. Styling must be specified on separate .less or
          .css files.
        </p>
      </div>

      <div>
        <h4>Dont use HTML Tables</h4>
        <p>
          Even though it is not forbidden, you're expected not to use
          html table elements. Use divs and css instead.
        </p>
      </div>

      <div>
        <h4>Javascript coding style</h4>

        <h5>No free variables</h5>
        <p>
          <em>Always</em> use the <code>var</code>
          keyword to declare your variables. Not doing so would lead
          to scope naming conflicts. 
        </p>

        <h5>Always use === operator for comparisions</h5>
        <p>
          The <code>===</code> operator behaves more like
          java's <code>equals</code>, the javascript <code>==</code>
          operator automatically coerces types, so for example, in
          javascript: 

          <pre>
            <code class="javascript">
              12345 == '12345';   // is true
              12345 === '12345';  // is false
            </code>
          </pre>
        </p>

        <h5>Declare functions as variables</h5>
        <p>
          Declare javascript functions by assigning anonymous
          functions to variables using the <code>var</code> keyword.
          <pre>
            <code class="javascript">
              // Not recommended.
              function doSomething() { ... }

              // Do this!
              var doSomething = function() { ... }
            </code>
          </pre>
        </p>

        <h5>Always use Javascript semicolons</h5>
        <p>
          Javascript semicolons <code>;</code> are used as statement
          terminator, unlike languages like java, in javascript
          semicolons can be infered by the engine when it finds a
          line feed. However you are expected to explicitly add
          semicolons so that javascript minimizers can remove line
          feeds safely.
          
          <pre>
            <code class="javascript">
              a = 1 + 2;  // Always do this.
              a = 1 + 2   // Dont do this, wont work on some compressors
            </code>
          </pre>
        </p>

        <h5>Dont polute global scope</h5>
        <p>
          You <em>must</em> place all global javascript code
          inside an anonymous immediatly-activated function.
          <pre>
            <code class="javascript">
              (function() {
                // your code here.
                // fine, but not recommended as we prefer commonjs
                // modules. see the following example...
              })();
            </code>

            <code class="javascript">
              // When using requirejs, you place all your code inside the
              // function given to require.
              // This example requires the IBE Login module from 
              // the next section, to login when loaded.
              require.def('my/module', ['ibe/login'], function(usrAuth){
                // All your code here.
                usrAuth.login('root', 'super-password')
              });
            </code>
          </pre>
        </p>

        <h5>Use javascript logging</h5>
        <p>
          Some times you will need to log something to the javascript
          console.<br />

          If you are using firefox install firebug, other browsers
          like chrome, opera and ie8 come with their own debuggers. <br />

          I recommend using chrome or firefox for javascript
          development. <br />
          
          Also, we have a <code>console.js</code> module you must use
          for all your logging needs instead of accessing
          window.console yourself. <br/>

          Using console.js allows us to enable javascript logging on
          development environment and easily disable it for
          production. <br />

          Also, thanks to IE8 not following the standards, you might
          want to
          install <a href="http://getfirebug.com/firebuglite">frebuglite</a>
          on it.

          <pre>
            <code class="javascript">
              window.console.debug('Hi') // DONT EVER access the console directly
              console.debug('Hi')        // NOT
            </code>
            <a name="login-module-example"/>
            <code class="javascript">
              /* 
                 Use the console.js module instead 

                 This example illustrates how to define a module in
                 <code>ibe/login.js</code>
                 with one dependency: the console.
              */
              require.def('ibe/login', ['console'], function(console) {
                console.debug('IBE LOGIN module loading');
                console.debug('run when all dependencies are loaded');

              
                // this var will be private inside the module.
                var currentUser;
                var md5Pwd;
              
                var doLogin = function(usr, pwd) {
                   console.debug('Logged in', usr, pwd);
                   currentUser = usr;

                   // suppose we have a ibe/encode.js module
                   // that exports an md5 function..
                   // and want to load it just when needed.

                   require(['ibe/encode], function(encode) {
                     encriptedPwd = encode.md5(pwd);
                   });
                };

                var doLogout = function() {
                   console.debug('Logged out', currentUser);
                   currentUser = null;
                }

                console.debug('returning module with public functions')

                return {
                   login: doLogin,
                   logout: doLogout
                };
              });
            </code>
          </pre>
        </p>
      </div>

    </div>

    <div class="content">
      <h3 class="ui-widget-header ui-corner-all">Tools</h3>

      <div>
        <h4>jQuery</h4>
        <p>
          We will be using jQuery, it's a really simple, jet powerful
          javascript framework for creating, modifing dom elements,
          and attaching, handling events. 
          
          <a href="http://jquery.org">Homepage</a>
        </p>
      </div>

      <div>
        <h4>jQuery UI</h4>
        <p>
          We will be using jQuery UI, for common reusable UI widgets
          like accordions, date pickers, etc.
          
          <a href="http://jqueryui.org">Homepage</a>
        </p>
      </div>

      <div>
        <h4>Underscore.js</h4>
        <p>
          Underscore provides several functional extension in
          javascript, like <code>_.each</code>, <code>_.deffer</code>
          
          <a href="http://documentcloud.github.com/underscore/">Homepage</a>
        </p>
      </div>

      <div>
        <h4>Less.js</h4>
        <p>
          Less is a css superset that allows you to declare variables
          in css, use mixins and simple math. Very useful for reusing
          styling data.
        </p>
        <a href="http://lesscss.org">Homepage</a>
      </div>

    </div>


    <div class="content">
      <h3 class="ui-widget-header ui-corner-all">Examples</h3>

      <div>
        <h5><a href="flatForm/index.html">Flat form</a></h5>
        <div>
          Flat form elements styling with rounder border on fieldsets.
        </div>
      </div>

      <div>
        <h5><a href="modal/index.html">Modal dialog</a></h5>
        <div>
          A modal window like from wireframe
        </div>
      </div>

      <div>
        <h5><a href="slideDownField/index.html">Slide down field</a></h5>
        <div>
          Show a field by clicking on the label
        </div>
      </div>


      <div>
        <h5><a href="gridList/index.html">Simple grid-list toggle</a></h5>
        <div>
          In this example you will learn how to create simple
          container that can be changed from grid to list mode.

          This example shows usage of LESS files, jQuery and underscore
          libraries.
        </div>
      </div>

    </div>
    
  </body>
</body>
